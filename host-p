#!/bin/bash
# ZeroDark Nexus | Localhost ‚Üí Public Hosting Tool

R="\e[1;31m"
G="\e[1;32m"
Y="\e[1;33m"
B="\e[1;34m"
C="\e[1;36m"
RS="\e[0m"

LOG=".tunnel_log.txt"

banner() {
  clear
  echo -e "${B}"
  echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
  echo "‚ïë        ZeroDark Nexus - Host Tool     ‚ïë"
  echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
  echo -e "${RS}"
}

# üîπ Function to start PHP server
start_php_server() {
  read -p $'\e[1;33mEnter Port [default:8080]: \e[0m' port
  port=${port:-8080}
  php -S 127.0.0.1:$port >/dev/null 2>&1 &
  sleep 2
  echo -e "${G}‚úî Localhost started at:${Y} http://127.0.0.1:$port${RS}\n"
}

# üîπ Cloudflared Tunnel
cloudflared_tunnel() {
  echo -e "${C}‚ñ∂ Starting Cloudflared Tunnel...${RS}"
  cloudflared tunnel --url http://127.0.0.1:$port --logfile "$LOG" >/dev/null 2>&1 &
  sleep 6
  L=$(grep -oE 'https://[-0-9a-z]*\.trycloudflare.com' "$LOG" | head -1)
  [[ -n "$L" ]] && echo -e "${G}üîó Cloudflared Link:${Y} $L${RS}" || echo -e "${R}‚ùå Cloudflared failed${RS}"
}

# üîπ Serveo Tunnel
serveo_tunnel() {
  echo -e "${C}‚ñ∂ Starting Serveo Tunnel...${RS}"
  ssh -o StrictHostKeyChecking=no -R 80:localhost:$port serveo.net >"$LOG" 2>&1 &
  sleep 6
  L=$(grep -oE 'https?://[^ ]+' "$LOG" | head -1)
  [[ -n "$L" ]] && echo -e "${G}üîó Serveo Link:${Y} $L${RS}" || echo -e "${R}‚ùå Serveo failed${RS}"
}

# üîπ Localhost.run Tunnel
localhostrun_tunnel() {
  echo -e "${C}‚ñ∂ Starting Localhost.run Tunnel...${RS}"
  nohup ssh -o StrictHostKeyChecking=no -R 80:localhost:$port nokey@localhost.run >"$LOG" 2>&1 &
  sleep 6
  L=$(grep -oE 'https://[a-zA-Z0-9._-]*\.lhr\.life' "$LOG" | head -1)
  [[ -n "$L" ]] && echo -e "${G}üîó Localhost.run Link:${Y} $L${RS}" || echo -e "${R}‚ùå Localhost.run failed${RS}"
}

# üîπ Tunnelmole Tunnel
tunnelmole_tunnel() {
  echo -e "${C}‚ñ∂ Starting Tunnelmole Tunnel...${RS}"
  tmole $port >"$LOG" 2>&1 &
  sleep 6
  L=$(grep -oE 'https://[0-9a-zA-Z.-]*tunnelmole.net' "$LOG" | head -1)
  [[ -n "$L" ]] && echo -e "${G}üîó Tunnelmole Link:${Y} $L${RS}" || echo -e "${R}‚ùå Tunnelmole failed${RS}"
}

# üîπ Main Menu
localhost_to_public() {
  banner
  start_php_server

  echo -e "${Y}Choose Public Hosting Service:${RS}"
  echo -e "${R}[1]${G} Cloudflared"
  echo -e "${R}[2]${C} Serveo"
  echo -e "${R}[3]${Y} Localhost.run"
  echo -e "${R}[4]${B} Tunnelmole"
  echo -e "${R}[0]${R} Exit${RS}\n"
  read -p $'\e[1;36mSelect Option: \e[0m' opt

  case $opt in
    1) cloudflared_tunnel ;;
    2) serveo_tunnel ;;
    3) localhostrun_tunnel ;;
    4) tunnelmole_tunnel ;;
    0) echo -e "${R}Exited.${RS}"; exit ;;
    *) echo -e "${R}Invalid option!${RS}" ;;
  esac

  echo -e "${C}\nPress Ctrl + C to stop hosting...${RS}"
  while true; do sleep 1; done
}

# üîπ Start Script
localhost_to_public
